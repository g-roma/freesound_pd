#N canvas 160 0 971 778 12;
#X declare -path purest_json;
#X obj 30 26 inlet;
#X obj 400 373 purest_json/urlparams;
#X obj 400 343 list trim;
#X obj 535 72 symbol;
#X obj 412 264 symbol;
#X obj 400 317 list prepend add;
#X msg 345 305 clear;
#X obj 654 80 text define -k \$0-search_url;
#A set https://www.freesound.org/apiv2/search/text/? \; https://www.freesound.org/apiv2/search/content/?
\; https://www.freesound.org/apiv2/search/combined/? \; https://www.freesound.org/apiv2/sounds/\$1/?
\; https://www.freesound.org/apiv2/sounds/\$1/analysis/? \; https://www.freesound.org/apiv2/sounds/\$1/similar/?
\; https://www.freesound.org/apiv2/sounds/\$1/comments/? \;;
#X obj 400 238 list store;
#X obj 400 214 t b a;
#X obj 291 247 t b b;
#X obj 412 289 list prepend token;
#X obj 291 304 t b b;
#X obj 159 191 route float list mode bang clear;
#X obj 159 215 pack f 0;
#X text 661 117 text \, content \, combined;
#X obj 159 239 t a;
#N canvas 0 22 450 300 search 0;
#X obj 125 153 text get \$0-search_url;
#X obj 125 79 mod 3;
#X obj 125 30 inlet;
#X obj 125 207 outlet;
#X text 180 76 <-- prevent other modes;
#X obj 293 158 print fs_query;
#X msg 293 133 MODE \$1;
#X obj 125 116 t f f;
#X connect 0 0 3 0;
#X connect 1 0 7 0;
#X connect 2 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 0 0;
#X connect 7 1 6 0;
#X restore 247 357 pd search mode;
#X obj 147 577 purest_json/json-decode;
#X obj 147 679 purest_json/json-decode;
#X obj 147 601 list trim;
#X text 268 545 <-- make the GET request;
#X text 338 579 <-- decode its first element;
#X text 339 681 <-- decode each 'result';
#X obj 147 547 purest_json/rest;
#X obj 147 492 list prepend GET;
#X obj 147 516 list trim;
#N canvas 0 22 450 300 mergeURI 0;
#X obj 125 123 list;
#X obj 91 123 list;
#X obj 91 174 route bang;
#X obj 228 140 t b a;
#X obj 116 47 t b b;
#X obj 23 19 inlet;
#X obj 69 20 inlet;
#X obj 254 13 inlet;
#X obj 287 245 outlet;
#X obj 287 169 list;
#X obj 254 41 t b b a;
#X msg 287 206 symbol \$1\$2;
#X text 172 121 <-- get whichever is filled;
#X text 55 206 append to symbol like this -->;
#X text 113 17 \$1;
#X text 304 12 \$2;
#X text 297 266 \$1\$2;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 2 1 3 0;
#X connect 3 0 4 0;
#X connect 3 1 9 0;
#X connect 4 0 1 1;
#X connect 4 1 0 1;
#X connect 5 0 1 1;
#X connect 6 0 0 1;
#X connect 7 0 10 0;
#X connect 9 0 11 0;
#X connect 10 0 1 0;
#X connect 10 1 0 0;
#X connect 10 2 9 1;
#X connect 11 0 8 0;
#X restore 159 407 pd mergeURI;
#X text 565 372 <-- format the query URL with parameters;
#X obj 148 107 route next prev;
#X obj 535 247 t a a;
#X text 350 458 <-- 'next/more' and 'previous' pages;
#X msg 147 134 1;
#X msg 179 134 0;
#X obj 147 158 t f;
#N canvas 337 67 676 553 traverse 0;
#X obj 450 45 inlet;
#X obj 242 145 route next more previous;
#X obj 412 460 outlet;
#X obj 242 45 inlet;
#X obj 50 232 list;
#X msg 129 360 symbol \$1\$2;
#X obj 193 230 list;
#X obj 128 463 outlet;
#X msg 451 307 symbol &token=\$1;
#X obj 51 45 inlet;
#X obj 50 157 sel 1 0;
#X obj 50 261 route bang;
#X obj 129 263 t a b;
#X obj 193 256 route bang;
#X obj 275 256 t a b;
#X obj 129 324 list;
#X connect 0 0 8 0;
#X connect 1 0 4 1;
#X connect 1 1 4 1;
#X connect 1 2 6 1;
#X connect 1 3 2 0;
#X connect 3 0 1 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 13 0;
#X connect 8 0 15 1;
#X connect 9 0 10 0;
#X connect 10 0 4 0;
#X connect 10 1 6 0;
#X connect 11 1 12 0;
#X connect 12 0 15 0;
#X connect 12 1 4 1;
#X connect 13 1 14 0;
#X connect 14 0 15 0;
#X connect 14 1 6 1;
#X connect 15 0 5 0;
#X restore 147 445 pd traverse result pages;
#N canvas 0 22 450 300 sounds 0;
#X obj 112 125 text get \$0-search_url;
#X obj 112 173 list trim;
#X msg 73 202 symbol https://www.freesound.org/apiv2/sounds/\$1/comments/?
, f 31;
#X obj 73 50 unpack;
#X obj 112 149 list prepend set symbol;
#X obj 112 75 mod 4;
#X obj 112 99 + 3;
#X obj 73 20 inlet;
#X obj 73 254 outlet;
#X text 158 82 <-- prevent other modes;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 8 0;
#X connect 3 0 2 0;
#X connect 3 1 5 0;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X connect 6 0 0 0;
#X connect 7 0 3 0;
#X restore 159 326 pd sounds mode;
#X text 636 136 sounds \, analysis \, similar \, comments;
#X obj 598 750 outlet DATA;
#X obj 147 750 outlet RESULTS;
#X obj 175 53 route api_key;
#X text 552 289 <-- api_key = token;
#X text 732 694 see fs_query-help.pd;
#X obj 685 32 declare -path purest_json;
#X obj 380 752 outlet COUNT;
#X obj 147 645 route results count;
#X obj 55 541 t a a;
#X obj 55 565 print;
#X obj 30 53 route client_secret;
#X connect 0 0 48 0;
#X connect 1 0 27 2;
#X connect 2 0 1 0;
#X connect 3 0 30 0;
#X connect 4 0 11 0;
#X connect 5 0 2 0;
#X connect 6 0 1 0;
#X connect 8 0 5 0;
#X connect 9 0 8 0;
#X connect 9 1 8 1;
#X connect 10 0 12 0;
#X connect 10 1 4 0;
#X connect 11 0 5 0;
#X connect 12 0 6 0;
#X connect 12 1 1 0;
#X connect 13 0 14 0;
#X connect 13 1 16 0;
#X connect 13 2 17 0;
#X connect 13 3 10 0;
#X connect 13 4 6 0;
#X connect 13 5 9 0;
#X connect 14 0 16 0;
#X connect 16 0 36 0;
#X connect 17 0 27 1;
#X connect 18 0 20 0;
#X connect 18 1 38 0;
#X connect 19 0 39 0;
#X connect 19 1 39 0;
#X connect 20 0 45 0;
#X connect 24 0 18 0;
#X connect 25 0 26 0;
#X connect 26 0 46 0;
#X connect 27 0 25 0;
#X connect 29 0 32 0;
#X connect 29 1 33 0;
#X connect 29 2 13 0;
#X connect 30 0 4 1;
#X connect 30 1 35 2;
#X connect 32 0 34 0;
#X connect 33 0 34 0;
#X connect 34 0 35 0;
#X connect 35 0 25 0;
#X connect 35 1 38 0;
#X connect 36 0 27 0;
#X connect 40 0 3 0;
#X connect 40 1 29 0;
#X connect 45 0 19 0;
#X connect 45 1 44 0;
#X connect 45 2 35 1;
#X connect 46 0 47 0;
#X connect 46 1 24 0;
#X connect 48 0 3 0;
#X connect 48 1 40 0;
